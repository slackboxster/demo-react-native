version: 2
jobs:
  setup:
    macos:
      xcode: "8.3.3"
    steps:
      - run: npm install -g react-native-cli
      - run: npm install -g detox-cli
  test:
    macos:
      xcode: "8.3.3"
    requires:
      setup
    steps:
      - run: detox build --configuration ios.sim.release
      - run: detox test --configuration ios.sim.release --cleanup
workflows:
  version: 2
  detox_tests:
    jobs:
      - setup
      - test
